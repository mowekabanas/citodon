/*!
 * Mowe Citodon Project v0.0.1 (http://letsmowe.org/)
 * Copyright 2013-2016 Mowe Developers
 * Licensed under MIT (https://github.com/mowekabanas/citodon/blob/master/LICENSE)
*/
function jump(t,e){function o(t){r=t-s,window.scrollTo(0,c.easing(r,a,l,u)),r<u?requestAnimationFrame(o):i()}function i(){window.scrollTo(0,a+l),"function"==typeof c.callback&&c.callback()}function n(t,e,o,i){return t/=i/2,t<1?o/2*t*t+e:(t--,-o/2*(t*(t-2)-1)+e)}var s,r,a=window.pageYOffset,c={duration:e.duration,offset:e.offset||0,callback:e.callback,easing:e.easing||n},l="string"==typeof t?c.offset+document.querySelector(t).getBoundingClientRect().top:t,u="function"==typeof c.duration?c.duration(l):c.duration;requestAnimationFrame(function(t){s=t,o(t)})}function initSmoothScrolling(){function t(){function t(t){e(t.target)&&(t.stopPropagation(),t.preventDefault(),jump(t.target.hash,{duration:n,callback:function(){i(t.target.hash)}}))}document.body.addEventListener("click",t,!1)}function e(t){return"a"===t.tagName.toLowerCase()&&t.hash.length>0&&o(t.href)===s}function o(t){return t.slice(0,t.lastIndexOf("#"))}function i(t){var e=document.getElementById(t.substring(1));e&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1),e.focus())}var n=400,s=location.hash?o(location.href):location.href;t()}var formSentCount=0,formSentCountLimit=2,requestURL="http://mailman.letsmowe.com/citodon/",formLocked=!1,form={viewport:document.getElementById("cForm")};form.fields={},form.sendButton={},form.fields.cName=document.getElementById("cName"),form.fields.cCity=document.getElementById("cCity"),form.fields.cPhone=document.getElementById("cPhone"),form.fields.cEmail=document.getElementById("cEmail"),form.fields.cMessage=document.getElementById("cMessage"),form.sendButton.viewport=document.getElementById("cSubmit"),form.states=["is-error","is-fail","is-sending","is-success"],form.changeState=function(t){if(form.viewport){for(var e=form.states.length;e--;)form.viewport.classList.remove(form.states[e]);form.viewport.classList.add(t)}},form.sendRequest=function(t){t&&$.ajax({cache:!1,crossDomain:!0,data:t,method:"get",beforeSend:function(){formLocked=!0,form.changeState("is-sending")},error:function(e){console.log(e),form.changeState("is-fail"),form.send(t,5e3)},success:function(t){console.log(t),t.sent?form.changeState("is-success"):form.changeState("is-error"),formLocked=!1},timeout:12e3,url:requestURL})},form.send=function(t,e){t&&(e?setTimeout(function(){form.sendRequest(t)},e):form.sendRequest(t))},form.sendButton.viewport.addEventListener("click",function(t){if(t.preventDefault(),!formLocked&&formSentCount<formSentCountLimit){var e=!!(form.fields.cName.value&&(form.fields.cPhone.value||form.fields.cEmail.value)&&form.fields.cCity.value&&form.fields.cMessage.value);if(e){formLocked=!0,formSentCount++;var o={cName:form.fields.cName.value,cPhone:form.fields.cPhone.value,cEmail:form.fields.cEmail.value,cAddress:"",cCity:form.fields.cCity.value,cMessage:form.fields.cMessage.value};form.send(o,!1)}else form.changeState("is-error")}});var EmailDeliver=function(){function t(t){this.formID=t,this.destination="fromagio_cristiano@live.com",this.formID&&this.init()}return t.prototype.formatMessage=function(){var t=document.getElementById(this.formID),e=t.querySelector("input#name").value,o=t.querySelector("input#email").value,i=t.querySelector("input#subject").value,n=t.querySelector("textarea#message").value,s="Nome: "+e+"\n\n"+n,r={From:"mailman@elbit.com.br",To:this.destination,Subject:i,TextBody:s,HTMLBody:s,ReplyTo:o};console.log(JSON.stringify(r));var a=new XMLHttpRequest;a.open("POST","https://api.postmarkapp.com/email",!0),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("X-Postmark-Server-Token","POSTMARK_API_TEST"),a.send(JSON.stringify(r)),a.onload=function(){if(a.status>=200&&a.status<400)try{console.log(a.responseText)}catch(t){console.log("Error parse: "+t)}else console.log("Erro")}},t.prototype.init=function(){this.destination?this.formatMessage():console.log("Destination missing")},t}();initSmoothScrolling();var Logo=function(){function t(t,e,o){this.viewport=t,this.url=e,this.fallback=o,this.get()}return t.prototype.appendTo=function(t,e){e?t.insertBefore(this.viewport,e):t.appendChild(this.viewport)},t.prototype.cloneTo=function(t){t.appendChild(this.viewport.cloneNode(this.viewport))},t.prototype.get=function(){var t=this;if(this.viewport&&this.url){var e=new XMLHttpRequest;e.open("GET",this.url,!0),e.onreadystatechange=function(){if(4===this.readyState&&200==this.status&&this.responseText)try{t.viewport.innerHTML=this.responseText,t.fallback&&t.fallback()}catch(e){}},e.send(),e=null}},t}(),Popover=function(){function t(t){var e=this;this.element=t,this.isShown=!0;try{this.element.addEventListener("mouseleave",function(){e.hide()})}catch(o){}}return t.prototype.show=function(){this.isShown=!0;try{this.element.classList.add("is-shown")}catch(t){}},t.prototype.hide=function(){this.isShown=!1;try{this.element.classList.remove("is-shown")}catch(t){}},t.prototype.toggle=function(){this.isShown?this.hide():this.show()},t.call=function(e){var o=document.getElementById(e);try{if(o.classList.contains("Popover"))return new t(o)}catch(i){return!1}return!1},t}(),RequiredField=function(){function t(t,e){var o=this;this.viewport=t,this.input={},this.fieldClass=e,this.onClick=function(){try{o.input.viewport.focus()}catch(t){}},this.onFocus=function(){o.viewport.classList.add("has-focus"),o.input.viewport.value&&o.viewport.classList.remove("is-empty")},this.onBlur=function(){o.viewport.classList.remove("has-focus"),o.input.viewport.value?o.viewport.classList.remove("is-empty"):o.viewport.classList.add("is-empty")},this.onInput=function(){o.input.viewport.value?(o.viewport.classList.remove("is-empty"),o.viewport.classList.add("has-label"),o.viewport.classList.add("is-valid")):(o.viewport.classList.remove("has-label"),o.viewport.classList.remove("is-valid"))},this.viewport&&this.init()}return t.prototype.normalize=function(){this.input.viewport.value&&this.viewport.classList.add("has-label")},t.prototype.addListeners=function(){try{this.viewport.addEventListener("click",this.onClick,!1),this.input.viewport.addEventListener("focus",this.onFocus,!1),this.input.viewport.addEventListener("blur",this.onBlur,!1),this.input.viewport.addEventListener("input",this.onInput,!1)}catch(t){}},t.prototype.getInputElement=function(){return this.input.viewport=this.viewport.querySelector(this.fieldClass),!!this.input.viewport},t.prototype.init=function(){this.getInputElement()&&this.addListeners(),this.normalize()},t}();